import{a as q,r as k,x as G,c as p,o as i,b as e,p as y,F as C,j as A,t as v,i as T,h as b,v as f,u as o,f as h,w as g,l as V,m as U,e as L,E as R,k as F,d as W,s as J,T as O,y as z,z as K,g as Q,n as B,q as H}from"./app-y0J050Dh.js";import{_ as X}from"./AuthenticatedLayout-C2whVhp_.js";/* empty css                                                             */import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CdnEudyz.js";const Z={class:"min-w-full divide-y divide-gray-200 text-sm"},ee={class:"bg-white divide-y divide-gray-200"},te={class:"px-4 py-2 whitespace-nowrap"},se={class:"px-4 py-2 whitespace-nowrap"},le={class:"px-4 py-2 whitespace-nowrap"},oe={class:"px-4 py-2 whitespace-nowrap"},ae={class:"px-4 py-2 whitespace-nowrap space-x-2"},re=["onClick"],ne=["onClick"],de=["onClick"],ie={key:0},ue={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4"},me={class:"bg-white p-6 rounded shadow-lg w-full max-w-2xl relative"},pe={class:"text-lg font-semibold mb-4"},be={class:"md:col-span-2"},ce={class:"col-span-2 flex justify-end space-x-2 mt-4"},xe={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},ve={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4"},fe={class:"bg-white p-6 rounded shadow-lg max-w-sm w-full relative"},ye={class:"flex justify-end space-x-2"},ge={__name:"AssetTransferHistory",props:{transfers:Array,users:Array,locations:Array,asset:Object},setup(u){const w=[...q().url.matchAll(/\/assets\/(\d+)/g)],m=w.length>0?w[w.length-1][1]:"";console.log("Asset ID:",m);const r=k(!1),d=k(!1),_=k(!1),$=k(null),D=u,n=G({id:null,asset_id:"",from_user_id:null,to_user_id:null,from_location:null,to_location:null,transfer_date:"",approved_by:"",reason:"",user_status:""}),l=()=>{n.reset(),d.value=!1,n.asset_id=m,r.value=!0},a=x=>{var t;n.id=x.id,n.asset_id=x.asset_id??((t=D.asset)==null?void 0:t.id)??"",n.from_user_id=x.from_user_id,n.to_user_id=x.to_user_id,n.from_location=x.from_location,n.to_location=x.to_location,n.transfer_date=x.transfer_date,n.approved_by=x.approved_by,n.reason=x.reason,n.user_status=x.user_status,d.value=!0,r.value=!0},N=x=>{$.value=x,_.value=!0},I=()=>{d.value?n.put(route("asset-transfers.update",n.id),{onSuccess:()=>r.value=!1,onError:x=>console.error("Update error:",x)}):n.post(route("asset-transfers.store"),{onSuccess:()=>r.value=!1,onError:x=>console.error("Create error:",x)})},P=()=>{$.value&&n.delete(route("asset-transfers.destroy",$.value),{onSuccess:()=>{_.value=!1,$.value=null},onError:x=>console.error("Delete error:",x)})},E=x=>{const t=`/public/ppi-asset/public/asset-transfers/${x}/print`;window.open(t,"_blank")};return(x,t)=>(i(),p(C,null,[e("div",{class:"mb-4 text-right"},[e("button",{onClick:l,class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"}," + Add Transfer ")]),e("table",Z,[t[11]||(t[11]=e("thead",null,[e("tr",{class:"bg-gray-50"},[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned User"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Reason"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",ee,[(i(!0),p(C,null,A(u.transfers,s=>{var c,j;return i(),p("tr",{key:s.id},[e("td",te,v(new Date(s.transfer_date).toLocaleDateString()),1),e("td",se,v(((c=u.users.find(M=>M.id===s.to_user_id))==null?void 0:c.name)||((j=u.users.find(M=>M.id===s.from_user_id))==null?void 0:j.name)||"N/A"),1),e("td",le,v(s.user_status),1),e("td",oe,v(s.reason||"-"),1),e("td",ae,[e("button",{onClick:M=>a(s),class:"text-indigo-600 hover:underline"},"Edit",8,re),e("button",{onClick:M=>N(s.id),class:"text-red-600 hover:underline"},"Delete",8,ne),e("button",{onClick:M=>E(s.id),class:"text-green-600 hover:underline"},"Print",8,de)])])}),128)),u.transfers.length===0?(i(),p("tr",ie,t[10]||(t[10]=[e("td",{colspan:"5",class:"px-4 py-2 text-center text-gray-500"},"No transfer history found.",-1)]))):y("",!0)])]),r.value?(i(),p("div",ue,[e("div",me,[e("h2",pe,v(d.value?"Edit Transfer":"Create Transfer"),1),e("form",{onSubmit:T(I,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 gap-4"},[e("div",null,[t[12]||(t[12]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Asset ID",-1)),b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o(n).asset_id=s),class:"border p-2 rounded w-full bg-gray-100",readonly:""},null,512),[[f,o(n).asset_id]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"From User",-1)),h(o(R),{modelValue:o(n).from_user_id,"onUpdate:modelValue":t[1]||(t[1]=s=>o(n).from_user_id=s),placeholder:"-- Select User --",filterable:"",clearable:"",class:"w-full"},{default:g(()=>[u.users&&u.users.length>0?(i(!0),p(C,{key:0},A(u.users,s=>(i(),V(o(U),{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128)):(i(),V(o(U),{key:1,disabled:"",value:""},{default:g(()=>t[13]||(t[13]=[L("No users available")])),_:1,__:[13]}))]),_:1},8,["modelValue"])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"To User",-1)),h(o(R),{modelValue:o(n).to_user_id,"onUpdate:modelValue":t[2]||(t[2]=s=>o(n).to_user_id=s),placeholder:"-- Select User --",filterable:"",clearable:"",class:"w-full"},{default:g(()=>[u.users&&u.users.length>0?(i(!0),p(C,{key:0},A(u.users,s=>(i(),V(o(U),{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128)):(i(),V(o(U),{key:1,disabled:"",value:""},{default:g(()=>t[15]||(t[15]=[L("No users available")])),_:1,__:[15]}))]),_:1},8,["modelValue"])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"From Location",-1)),h(o(R),{modelValue:o(n).from_location,"onUpdate:modelValue":t[3]||(t[3]=s=>o(n).from_location=s),placeholder:"-- Select Location --",filterable:"",clearable:"",class:"w-full"},{default:g(()=>[u.locations&&u.locations.length>0?(i(!0),p(C,{key:0},A(u.locations,s=>(i(),V(o(U),{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128)):(i(),V(o(U),{key:1,disabled:"",value:""},{default:g(()=>t[17]||(t[17]=[L("No locations available")])),_:1,__:[17]}))]),_:1},8,["modelValue"])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"To Location",-1)),h(o(R),{modelValue:o(n).to_location,"onUpdate:modelValue":t[4]||(t[4]=s=>o(n).to_location=s),placeholder:"-- Select Location --",filterable:"",clearable:"",class:"w-full"},{default:g(()=>[u.locations&&u.locations.length>0?(i(!0),p(C,{key:0},A(u.locations,s=>(i(),V(o(U),{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128)):(i(),V(o(U),{key:1,disabled:"",value:""},{default:g(()=>t[19]||(t[19]=[L("No locations available")])),_:1,__:[19]}))]),_:1},8,["modelValue"])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Transfer Date",-1)),b(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o(n).transfer_date=s),type:"date",class:"border p-2 rounded w-full"},null,512),[[f,o(n).transfer_date]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"User Status",-1)),b(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>o(n).user_status=s),class:"border p-2 rounded w-full"},t[22]||(t[22]=[W('<option disabled value="">-- Select Status --</option><option value="available">Available</option><option value="assigned">Assigned</option><option value="repair">Repair</option><option value="retired">Retired</option>',5)]),512),[[F,o(n).user_status]])]),e("div",be,[t[24]||(t[24]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Reason",-1)),b(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>o(n).reason=s),class:"border p-2 rounded w-full"},null,512),[[f,o(n).reason]])]),e("div",ce,[e("button",{type:"button",onClick:t[8]||(t[8]=s=>r.value=!1),class:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300"},"Cancel "),e("button",xe,v(d.value?"Update":"Submit"),1)])],32)])])):y("",!0),_.value?(i(),p("div",ve,[e("div",fe,[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold mb-4"},"Confirm Delete",-1)),t[26]||(t[26]=e("p",{class:"mb-6"},"Are you sure you want to delete this transfer record?",-1)),e("div",ye,[e("button",{onClick:t[9]||(t[9]=s=>_.value=!1),class:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300"},"Cancel"),e("button",{onClick:P,class:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"},"Delete")])])])):y("",!0)],64))}},we={class:"p-6 bg-gray-50 min-h-screen"},ke={class:"overflow-x-auto bg-white rounded-xl shadow-lg border border-gray-200"},he={class:"min-w-full divide-y divide-gray-200 text-sm"},_e={class:"bg-white divide-y divide-gray-200"},Ce={class:"px-6 py-4 whitespace-nowrap"},$e={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"px-6 py-4 whitespace-nowrap"},Ue={class:"px-6 py-4 whitespace-nowrap"},Ae={class:"px-6 py-4 whitespace-nowrap"},Se={class:"px-6 py-4 whitespace-nowrap"},De={class:"px-6 py-4 whitespace-nowrap text-center space-x-3"},Ne=["onClick"],Me=["onClick"],Ee={key:0},Re={class:"modal-content"},Te={class:"flex justify-between items-center border-b border-gray-200 pb-4 mb-6"},je={class:"text-2xl font-semibold text-gray-800"},Le={key:0,class:"text-red-500 text-xs mt-1"},ze={key:0,class:"text-red-500 text-xs mt-1"},Be={key:0,class:"text-red-500 text-xs mt-1"},Fe={key:0,class:"text-red-500 text-xs mt-1"},Ie={key:0,class:"text-red-500 text-xs mt-1"},Pe={class:"md:col-span-2"},He={key:0,class:"text-red-500 text-xs mt-1"},Oe={class:"md:col-span-2 flex justify-end space-x-3 mt-6"},qe={type:"submit",class:"px-5 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75"},Ge={__name:"AssetRepairHistory",props:{asset:{type:Object,required:!0}},setup(u){const S=u,w=k([]),m=k({id:null,asset_id:S.asset.id,repair_date:"",issue:"",repair_cost:null,status:"",vendor:"",remarks:""}),r=k({}),d=k(!1),_=k(!1),$=k(null),D=t=>t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"",n=async()=>{if(!S.asset.id){console.warn("Asset ID is not available to load repairs."),w.value=[];return}try{const t=await z.get(`/assets/${S.asset.id}/repairs`);w.value=t.data}catch(t){console.error("Failed to load repairs:",t)}},l=()=>{m.value={id:null,asset_id:S.asset.id,repair_date:"",issue:"",repair_cost:null,status:"",vendor:"",remarks:""},r.value={},d.value=!0},a=t=>{m.value={id:t.id,asset_id:t.asset_id,repair_date:t.repair_date,issue:t.issue,repair_cost:t.repair_cost,status:t.status,vendor:t.vendor,remarks:t.remarks},r.value={},d.value=!0},N=()=>{d.value=!1,r.value={}},I=async()=>{r.value={};try{m.value.id?await z.put(`/repairs/${m.value.id}`,m.value):await z.post("/repairs",m.value),await n(),N()}catch(t){t.response&&t.response.status===422?r.value=t.response.data.errors:(console.error("An unexpected error occurred during form submission:",t),alert("An unexpected error occurred. Please try again."))}},P=t=>{$.value=t,_.value=!0},E=()=>{$.value=null,_.value=!1},x=async()=>{try{await z.delete(`/repairs/${$.value}`),await n(),E()}catch(t){console.error("Failed to delete repair:",t),alert("Failed to delete repair. Please try again.")}};return J(()=>S.asset.id,t=>{t?n():w.value=[]},{immediate:!0}),(t,s)=>(i(),p("div",we,[e("div",{class:"flex justify-end mb-6"},[e("button",{onClick:l,class:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75"}," Add New Repair ")]),e("div",ke,[e("table",he,[s[9]||(s[9]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Issue"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cost"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Vendor"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Remarks"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",_e,[(i(!0),p(C,null,A(w.value,c=>(i(),p("tr",{key:c.id,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",Ce,v(D(c.repair_date)),1),e("td",$e,v(c.issue||"-"),1),e("td",Ve,v(c.repair_cost??"-"),1),e("td",Ue,v(c.status||"-"),1),e("td",Ae,v(c.vendor||"-"),1),e("td",Se,v(c.remarks||"-"),1),e("td",De,[e("button",{onClick:j=>a(c),class:"text-blue-600 hover:text-blue-800 transition duration-150 ease-in-out focus:outline-none"},s[6]||(s[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 inline-block align-middle",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.38-2.828-2.829z"})],-1),e("span",{class:"sr-only"},"Edit",-1)]),8,Ne),e("button",{onClick:j=>P(c.id),class:"text-red-600 hover:text-red-800 transition duration-150 ease-in-out focus:outline-none"},s[7]||(s[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 inline-block align-middle",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),e("span",{class:"sr-only"},"Delete",-1)]),8,Me)])]))),128)),w.value.length===0?(i(),p("tr",Ee,s[8]||(s[8]=[e("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"},"No repair history found for this asset.",-1)]))):y("",!0)])])]),h(O,{name:"modal-fade"},{default:g(()=>[d.value?(i(),p("div",{key:0,class:"modal-overlay",onClick:T(N,["self"])},[e("div",Re,[e("div",Te,[e("h3",je,v(m.value.id?"Edit Repair":"Add New Repair"),1),e("button",{onClick:N,class:"text-gray-400 hover:text-gray-600 transition-colors duration-200 focus:outline-none"},s[10]||(s[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:T(I,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 gap-y-5 gap-x-4"},[e("div",null,[s[11]||(s[11]=e("label",{for:"repair_date",class:"block text-sm font-medium text-gray-700 mb-1"},"Repair Date",-1)),b(e("input",{id:"repair_date",type:"date","onUpdate:modelValue":s[0]||(s[0]=c=>m.value.repair_date=c),required:"",class:"block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500 text-gray-800"},null,512),[[f,m.value.repair_date]]),r.value.repair_date?(i(),p("p",Le,v(r.value.repair_date[0]),1)):y("",!0)]),e("div",null,[s[12]||(s[12]=e("label",{for:"issue",class:"block text-sm font-medium text-gray-700 mb-1"},"Issue",-1)),b(e("input",{id:"issue",type:"text","onUpdate:modelValue":s[1]||(s[1]=c=>m.value.issue=c),maxlength:"255",placeholder:"e.g., Engine malfunction",class:"block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500 text-gray-800"},null,512),[[f,m.value.issue]]),r.value.issue?(i(),p("p",ze,v(r.value.issue[0]),1)):y("",!0)]),e("div",null,[s[13]||(s[13]=e("label",{for:"repair_cost",class:"block text-sm font-medium text-gray-700 mb-1"},"Cost ($)",-1)),b(e("input",{id:"repair_cost",type:"number",step:"0.01","onUpdate:modelValue":s[2]||(s[2]=c=>m.value.repair_cost=c),placeholder:"e.g., 150.00",class:"block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500 text-gray-800"},null,512),[[f,m.value.repair_cost,void 0,{number:!0}]]),r.value.repair_cost?(i(),p("p",Be,v(r.value.repair_cost[0]),1)):y("",!0)]),e("div",null,[s[14]||(s[14]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(e("input",{id:"status",type:"text","onUpdate:modelValue":s[3]||(s[3]=c=>m.value.status=c),maxlength:"50",placeholder:"e.g., Completed, Pending",class:"block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500 text-gray-800"},null,512),[[f,m.value.status]]),r.value.status?(i(),p("p",Fe,v(r.value.status[0]),1)):y("",!0)]),e("div",null,[s[15]||(s[15]=e("label",{for:"vendor",class:"block text-sm font-medium text-gray-700 mb-1"},"Vendor",-1)),b(e("input",{id:"vendor",type:"text","onUpdate:modelValue":s[4]||(s[4]=c=>m.value.vendor=c),maxlength:"255",placeholder:"e.g., ABC Auto Repair",class:"block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500 text-gray-800"},null,512),[[f,m.value.vendor]]),r.value.vendor?(i(),p("p",Ie,v(r.value.vendor[0]),1)):y("",!0)]),e("div",Pe,[s[16]||(s[16]=e("label",{for:"remarks",class:"block text-sm font-medium text-gray-700 mb-1"},"Remarks",-1)),b(e("textarea",{id:"remarks","onUpdate:modelValue":s[5]||(s[5]=c=>m.value.remarks=c),rows:"3",placeholder:"Any additional notes...",class:"block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500 text-gray-800"},null,512),[[f,m.value.remarks]]),r.value.remarks?(i(),p("p",He,v(r.value.remarks[0]),1)):y("",!0)]),e("div",Oe,[e("button",{type:"button",onClick:N,class:"px-5 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-300"}," Cancel "),e("button",qe,v(m.value.id?"Update Repair":"Add Repair"),1)])],32)])])):y("",!0)]),_:1}),h(O,{name:"modal-fade"},{default:g(()=>[_.value?(i(),p("div",{key:0,class:"modal-overlay",onClick:T(E,["self"])},[e("div",{class:"modal-content text-center max-w-sm"},[s[17]||(s[17]=e("div",{class:"flex justify-center mb-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-14 w-14 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),s[18]||(s[18]=e("h3",{class:"text-xl font-semibold text-gray-800 mb-3"},"Confirm Deletion",-1)),s[19]||(s[19]=e("p",{class:"text-gray-600 mb-6"},"Are you sure you want to delete this repair record? This action cannot be undone.",-1)),e("div",{class:"flex justify-center space-x-4"},[e("button",{onClick:E,class:"px-5 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-300"}," Cancel "),e("button",{onClick:x,class:"px-5 py-2 bg-red-600 text-white rounded-md shadow-sm hover:bg-red-700 transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-75"}," Delete ")])])])):y("",!0)]),_:1})]))}},We=Y(Ge,[["__scopeId","data-v-4225c94d"]]),Je={class:"max-w-7xl mx-auto p-6 bg-white rounded shadow mt-4"},Ke={class:"mb-6 border-b border-gray-200"},Qe={class:"flex space-x-6"},Xe={key:0,class:"fixed-center bg-green-600 text-white px-6 py-3 rounded shadow-lg z-50"},Ye=["value"],Ze=["value"],et={class:"md:col-span-3"},tt={class:"md:col-span-3"},st={class:"md:col-span-3 flex justify-between items-center"},lt=["disabled"],it={__name:"Edit",props:{asset:Object,users:Array,locations:Array,categories:Array,transfers:Array,next_id:Number,previous_id:Number},setup(u){var D;const{flash:S}=q().props,w=k(!1),m=k("edit"),r=u,d=G({asset_code:r.asset.asset_code,name:r.asset.name,category:((D=r.asset.category)==null?void 0:D.id)??"",model:r.asset.model,serial_number:r.asset.serial_number,vendor:r.asset.vendor,purchase_date:r.asset.purchase_date,purchase_cost:r.asset.purchase_cost,warranty_expiry:r.asset.warranty_expiry,account_id:r.asset.account_id,status:r.asset.status,current_location_id:r.asset.current_location_id,assigned_to_user_id:r.asset.assigned_to_user_id,notes:r.asset.notes,remark:r.asset.remark}),_=K(()=>d.isDirty),$=()=>{var n;if(!((n=r.asset)!=null&&n.id)){console.error("Asset ID is missing. Cannot submit the form.");return}d.put(route("assets.update",r.asset.id),{preserveScroll:!0,onSuccess:()=>{w.value=!0,setTimeout(()=>{w.value=!1},3e3)},onError:l=>{console.error("Form submission failed:",l),alert("There was an error updating the asset. Please check the fields and try again.")}})};return(n,l)=>(i(),p(C,null,[h(o(Q),{title:"Edit Asset"}),h(X,null,{header:g(()=>l[19]||(l[19]=[e("h2",{class:"text-xl font-semibold text-gray-800"},"Edit Asset",-1)])),default:g(()=>[e("div",Je,[e("nav",Ke,[e("ul",Qe,[e("li",null,[e("button",{onClick:l[0]||(l[0]=a=>m.value="edit"),class:B([m.value==="edit"?"border-b-2 border-blue-600 text-blue-600 font-semibold":"text-gray-600 hover:text-blue-600","pb-2"])}," Edit Asset ",2)]),e("li",null,[e("button",{onClick:l[1]||(l[1]=a=>m.value="transfer"),class:B([m.value==="transfer"?"border-b-2 border-blue-600 text-blue-600 font-semibold":"text-gray-600 hover:text-blue-600","pb-2"])}," Transfer History ",2)]),e("li",null,[e("button",{onClick:l[2]||(l[2]=a=>m.value="repair"),class:B([m.value==="repair"?"border-b-2 border-blue-600 text-blue-600 font-semibold":"text-gray-600 hover:text-blue-600","pb-2"])}," Repair History ",2)])])]),e("div",null,[h(O,{name:"fade"},{default:g(()=>[w.value?(i(),p("div",Xe," Asset updated successfully! ")):y("",!0)]),_:1}),b(e("div",null,[e("form",{onSubmit:T($,["prevent"]),class:"grid grid-cols-1 md:grid-cols-3 gap-6"},[e("div",null,[l[20]||(l[20]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Asset Code",-1)),b(e("input",{"onUpdate:modelValue":l[3]||(l[3]=a=>o(d).asset_code=a),placeholder:"Asset Code",class:"border p-2 rounded w-full"},null,512),[[f,o(d).asset_code]])]),e("div",null,[l[21]||(l[21]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Name",-1)),b(e("input",{"onUpdate:modelValue":l[4]||(l[4]=a=>o(d).name=a),placeholder:"Name",class:"border p-2 rounded w-full"},null,512),[[f,o(d).name]])]),e("div",null,[l[23]||(l[23]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Category",-1)),b(e("select",{"onUpdate:modelValue":l[5]||(l[5]=a=>o(d).category=a),class:"border p-2 rounded w-full"},[l[22]||(l[22]=e("option",{disabled:"",value:""},"-- Select Category --",-1)),(i(!0),p(C,null,A(u.categories,a=>(i(),p("option",{key:a.id,value:a.id},v(a.category_name),9,Ye))),128))],512),[[F,o(d).category]])]),e("div",null,[l[24]||(l[24]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Model",-1)),b(e("input",{"onUpdate:modelValue":l[6]||(l[6]=a=>o(d).model=a),placeholder:"Model",class:"border p-2 rounded w-full"},null,512),[[f,o(d).model]])]),e("div",null,[l[25]||(l[25]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Serial Number",-1)),b(e("input",{"onUpdate:modelValue":l[7]||(l[7]=a=>o(d).serial_number=a),placeholder:"Serial Number",class:"border p-2 rounded w-full"},null,512),[[f,o(d).serial_number]])]),e("div",null,[l[26]||(l[26]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Vendor",-1)),b(e("input",{"onUpdate:modelValue":l[8]||(l[8]=a=>o(d).vendor=a),placeholder:"Vendor",class:"border p-2 rounded w-full"},null,512),[[f,o(d).vendor]])]),e("div",null,[l[27]||(l[27]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Purchase Date",-1)),b(e("input",{"onUpdate:modelValue":l[9]||(l[9]=a=>o(d).purchase_date=a),type:"date",class:"border p-2 rounded w-full"},null,512),[[f,o(d).purchase_date]])]),e("div",null,[l[28]||(l[28]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Purchase Cost",-1)),b(e("input",{"onUpdate:modelValue":l[10]||(l[10]=a=>o(d).purchase_cost=a),type:"number",placeholder:"Cost",class:"border p-2 rounded w-full"},null,512),[[f,o(d).purchase_cost]])]),e("div",null,[l[29]||(l[29]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Warranty Expiry",-1)),b(e("input",{"onUpdate:modelValue":l[11]||(l[11]=a=>o(d).warranty_expiry=a),type:"date",class:"border p-2 rounded w-full"},null,512),[[f,o(d).warranty_expiry]])]),e("div",null,[l[31]||(l[31]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"User Status",-1)),b(e("select",{"onUpdate:modelValue":l[12]||(l[12]=a=>o(d).status=a),class:"border p-2 rounded w-full"},l[30]||(l[30]=[e("option",{disabled:"",value:""},"-- Select User Status --",-1),e("option",{value:"instock"},"In Stock",-1),e("option",{value:"using"},"Using",-1),e("option",{value:"repair"},"Repair",-1),e("option",{value:"broken"},"Broken",-1)]),512),[[F,o(d).status]])]),e("div",null,[l[33]||(l[33]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Current Location",-1)),b(e("select",{"onUpdate:modelValue":l[13]||(l[13]=a=>o(d).current_location_id=a),class:"border p-2 rounded w-full"},[l[32]||(l[32]=e("option",{disabled:"",value:""},"-- Select Location --",-1)),(i(!0),p(C,null,A(u.locations,a=>(i(),p("option",{key:a.id,value:a.id},v(a.name),9,Ze))),128))],512),[[F,o(d).current_location_id]])]),e("div",null,[l[34]||(l[34]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Assigned User",-1)),h(o(R),{modelValue:o(d).assigned_to_user_id,"onUpdate:modelValue":l[14]||(l[14]=a=>o(d).assigned_to_user_id=a),placeholder:"-- Select Assigned User --",class:"w-full",filterable:""},{default:g(()=>[(i(!0),p(C,null,A(u.users,a=>(i(),V(o(U),{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",et,[l[35]||(l[35]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Notes",-1)),b(e("textarea",{"onUpdate:modelValue":l[15]||(l[15]=a=>o(d).notes=a),placeholder:"Notes",class:"border p-2 rounded w-full"},null,512),[[f,o(d).notes]])]),e("div",tt,[l[36]||(l[36]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"remark",-1)),b(e("textarea",{"onUpdate:modelValue":l[16]||(l[16]=a=>o(d).remark=a),placeholder:"Remark",class:"border p-2 rounded w-full"},null,512),[[f,o(d).remark]])]),e("div",st,[e("div",null,[u.previous_id?(i(),p("button",{key:0,onClick:l[17]||(l[17]=a=>n.$inertia.visit(`/assets/${u.previous_id}/edit`)),type:"button",class:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded mr-2"}," ← Previous ")):y("",!0),u.next_id?(i(),p("button",{key:1,onClick:l[18]||(l[18]=a=>n.$inertia.visit(`/assets/${u.next_id}/edit`)),type:"button",class:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded"}," Next → ")):y("",!0)]),e("button",{type:"submit",class:B(["bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",{"opacity-50 cursor-not-allowed":!_.value}]),disabled:!_.value}," Update ",10,lt)])],32)],512),[[H,m.value==="edit"]]),b(e("div",null,[h(ge,{transfers:u.transfers,users:u.users,locations:u.locations,asset:u.asset},null,8,["transfers","users","locations","asset"])],512),[[H,m.value==="transfer"]]),b(e("div",null,[h(We,{asset:u.asset},null,8,["asset"])],512),[[H,m.value==="repair"]])])])]),_:1})],64))}};export{it as default};
