import{a as O,r as $,x as q,c as b,o as i,b as e,p as y,F as C,j as D,t as f,i as L,h as c,v,u as o,f as V,w as h,l as S,m as A,e as R,E as j,k as M,d as G,s as J,y as W,g as K,n as P,T as Q,q as B}from"./app-Cr83C6iC.js";import{_ as X}from"./AuthenticatedLayout-Bbjingd1.js";/* empty css                                                             */import"./ApplicationLogo-CkVEDbdh.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"min-w-full divide-y divide-gray-200 text-sm"},Z={class:"bg-white divide-y divide-gray-200"},ee={class:"px-4 py-2 whitespace-nowrap"},te={class:"px-4 py-2 whitespace-nowrap"},se={class:"px-4 py-2 whitespace-nowrap"},le={class:"px-4 py-2 whitespace-nowrap"},oe={class:"px-4 py-2 whitespace-nowrap space-x-2"},ae=["onClick"],re=["onClick"],ne=["onClick"],de={key:0},ie={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4"},ue={class:"bg-white p-6 rounded shadow-lg w-full max-w-2xl relative"},me={class:"text-lg font-semibold mb-4"},pe={class:"md:col-span-2"},be={class:"col-span-2 flex justify-end space-x-2 mt-4"},ce={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},xe={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4"},fe={class:"bg-white p-6 rounded shadow-lg max-w-sm w-full relative"},ve={class:"flex justify-end space-x-2"},ye={__name:"AssetTransferHistory",props:{transfers:Array,users:Array,locations:Array,asset:Object},setup(p){const w=[...O().url.matchAll(/\/assets\/(\d+)/g)],g=w.length>0?w[w.length-1][1]:"";console.log("Asset ID:",g);const d=$(!1),r=$(!1),k=$(!1),_=$(null),U=p,u=q({id:null,asset_id:"",from_user_id:null,to_user_id:null,from_location:null,to_location:null,transfer_date:"",approved_by:"",reason:"",user_status:""}),t=()=>{u.reset(),r.value=!1,u.asset_id=g,d.value=!0},n=x=>{var l;u.id=x.id,u.asset_id=x.asset_id??((l=U.asset)==null?void 0:l.id)??"",u.from_user_id=x.from_user_id,u.to_user_id=x.to_user_id,u.from_location=x.from_location,u.to_location=x.to_location,u.transfer_date=x.transfer_date,u.approved_by=x.approved_by,u.reason=x.reason,u.user_status=x.user_status,r.value=!0,d.value=!0},z=x=>{_.value=x,k.value=!0},T=()=>{r.value?u.put(route("asset-transfers.update",u.id),{onSuccess:()=>d.value=!1,onError:x=>console.error("Update error:",x)}):u.post(route("asset-transfers.store"),{onSuccess:()=>d.value=!1,onError:x=>console.error("Create error:",x)})},F=()=>{_.value&&u.delete(route("asset-transfers.destroy",_.value),{onSuccess:()=>{k.value=!1,_.value=null},onError:x=>console.error("Delete error:",x)})},I=x=>{const l=`/public/ppi-asset/public/asset-transfers/${x}/print`;window.open(l,"_blank")};return(x,l)=>(i(),b(C,null,[e("div",{class:"mb-4 text-right"},[e("button",{onClick:t,class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"}," + Add Transfer ")]),e("table",Y,[l[11]||(l[11]=e("thead",null,[e("tr",{class:"bg-gray-50"},[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assigned User"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Reason"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Z,[(i(!0),b(C,null,D(p.transfers,s=>{var a,N;return i(),b("tr",{key:s.id},[e("td",ee,f(new Date(s.transfer_date).toLocaleDateString()),1),e("td",te,f(((a=p.users.find(m=>m.id===s.to_user_id))==null?void 0:a.name)||((N=p.users.find(m=>m.id===s.from_user_id))==null?void 0:N.name)||"N/A"),1),e("td",se,f(s.user_status),1),e("td",le,f(s.reason||"-"),1),e("td",oe,[e("button",{onClick:m=>n(s),class:"text-indigo-600 hover:underline"},"Edit",8,ae),e("button",{onClick:m=>z(s.id),class:"text-red-600 hover:underline"},"Delete",8,re),e("button",{onClick:m=>I(s.id),class:"text-green-600 hover:underline"},"Print",8,ne)])])}),128)),p.transfers.length===0?(i(),b("tr",de,l[10]||(l[10]=[e("td",{colspan:"5",class:"px-4 py-2 text-center text-gray-500"},"No transfer history found.",-1)]))):y("",!0)])]),d.value?(i(),b("div",ie,[e("div",ue,[e("h2",me,f(r.value?"Edit Transfer":"Create Transfer"),1),e("form",{onSubmit:L(T,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 gap-4"},[e("div",null,[l[12]||(l[12]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Asset ID",-1)),c(e("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>o(u).asset_id=s),class:"border p-2 rounded w-full bg-gray-100",readonly:""},null,512),[[v,o(u).asset_id]])]),e("div",null,[l[14]||(l[14]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"From User",-1)),V(o(j),{modelValue:o(u).from_user_id,"onUpdate:modelValue":l[1]||(l[1]=s=>o(u).from_user_id=s),placeholder:"-- Select User --",filterable:"",clearable:"",class:"w-full"},{default:h(()=>[p.users&&p.users.length>0?(i(!0),b(C,{key:0},D(p.users,s=>(i(),S(o(A),{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128)):(i(),S(o(A),{key:1,disabled:"",value:""},{default:h(()=>l[13]||(l[13]=[R("No users available")])),_:1,__:[13]}))]),_:1},8,["modelValue"])]),e("div",null,[l[16]||(l[16]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"To User",-1)),V(o(j),{modelValue:o(u).to_user_id,"onUpdate:modelValue":l[2]||(l[2]=s=>o(u).to_user_id=s),placeholder:"-- Select User --",filterable:"",clearable:"",class:"w-full"},{default:h(()=>[p.users&&p.users.length>0?(i(!0),b(C,{key:0},D(p.users,s=>(i(),S(o(A),{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128)):(i(),S(o(A),{key:1,disabled:"",value:""},{default:h(()=>l[15]||(l[15]=[R("No users available")])),_:1,__:[15]}))]),_:1},8,["modelValue"])]),e("div",null,[l[18]||(l[18]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"From Location",-1)),V(o(j),{modelValue:o(u).from_location,"onUpdate:modelValue":l[3]||(l[3]=s=>o(u).from_location=s),placeholder:"-- Select Location --",filterable:"",clearable:"",class:"w-full"},{default:h(()=>[p.locations&&p.locations.length>0?(i(!0),b(C,{key:0},D(p.locations,s=>(i(),S(o(A),{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128)):(i(),S(o(A),{key:1,disabled:"",value:""},{default:h(()=>l[17]||(l[17]=[R("No locations available")])),_:1,__:[17]}))]),_:1},8,["modelValue"])]),e("div",null,[l[20]||(l[20]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"To Location",-1)),V(o(j),{modelValue:o(u).to_location,"onUpdate:modelValue":l[4]||(l[4]=s=>o(u).to_location=s),placeholder:"-- Select Location --",filterable:"",clearable:"",class:"w-full"},{default:h(()=>[p.locations&&p.locations.length>0?(i(!0),b(C,{key:0},D(p.locations,s=>(i(),S(o(A),{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128)):(i(),S(o(A),{key:1,disabled:"",value:""},{default:h(()=>l[19]||(l[19]=[R("No locations available")])),_:1,__:[19]}))]),_:1},8,["modelValue"])]),e("div",null,[l[21]||(l[21]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Transfer Date",-1)),c(e("input",{"onUpdate:modelValue":l[5]||(l[5]=s=>o(u).transfer_date=s),type:"date",class:"border p-2 rounded w-full"},null,512),[[v,o(u).transfer_date]])]),e("div",null,[l[23]||(l[23]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"User Status",-1)),c(e("select",{"onUpdate:modelValue":l[6]||(l[6]=s=>o(u).user_status=s),class:"border p-2 rounded w-full"},l[22]||(l[22]=[G('<option disabled value="">-- Select Status --</option><option value="available">Available</option><option value="assigned">Assigned</option><option value="repair">Repair</option><option value="retired">Retired</option>',5)]),512),[[M,o(u).user_status]])]),e("div",pe,[l[24]||(l[24]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Reason",-1)),c(e("textarea",{"onUpdate:modelValue":l[7]||(l[7]=s=>o(u).reason=s),class:"border p-2 rounded w-full"},null,512),[[v,o(u).reason]])]),e("div",be,[e("button",{type:"button",onClick:l[8]||(l[8]=s=>d.value=!1),class:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300"},"Cancel "),e("button",ce,f(r.value?"Update":"Submit"),1)])],32)])])):y("",!0),k.value?(i(),b("div",xe,[e("div",fe,[l[25]||(l[25]=e("h3",{class:"text-lg font-semibold mb-4"},"Confirm Delete",-1)),l[26]||(l[26]=e("p",{class:"mb-6"},"Are you sure you want to delete this transfer record?",-1)),e("div",ve,[e("button",{onClick:l[9]||(l[9]=s=>k.value=!1),class:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300"},"Cancel"),e("button",{onClick:F,class:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"},"Delete")])])])):y("",!0)],64))}},ge={class:"p-6 bg-gray-50 min-h-screen"},we={key:0,class:"mb-4 p-4 bg-green-100 text-green-800 rounded-lg"},ke={class:"overflow-x-auto bg-white rounded-xl shadow-lg border border-gray-200"},he={class:"min-w-full divide-y divide-gray-200 text-sm"},$e={class:"bg-white divide-y divide-gray-200"},Ce={class:"px-6 py-4 whitespace-nowrap"},_e={class:"px-6 py-4 whitespace-nowrap"},Ve={class:"px-6 py-4 whitespace-nowrap"},Ue={class:"px-6 py-4 whitespace-nowrap"},Se={class:"px-6 py-4 whitespace-nowrap"},Ae={class:"px-6 py-4 whitespace-nowrap"},De={class:"px-6 py-4 whitespace-nowrap text-center space-x-3"},Ee=["onClick"],Ne=["onClick"],Te={key:0},je={class:"bg-white rounded-lg shadow-2xl p-8 w-full max-w-2xl transform transition-all"},Me={class:"text-2xl font-bold text-gray-800 mb-6"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Pe={key:0,class:"mt-1 text-xs text-red-600"},Le={key:0,class:"mt-1 text-xs text-red-600"},ze={class:"md:col-span-2"},Fe={key:0,class:"mt-1 text-xs text-red-600"},Ie={key:0,class:"mt-1 text-xs text-red-600"},He={key:0,class:"mt-1 text-xs text-red-600"},Be={class:"md:col-span-2"},Oe={key:0,class:"mt-1 text-xs text-red-600"},qe={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ge={__name:"AssetRepairHistory",props:{asset:Object},setup(p){const E=p,w=$([]),g=()=>{var s;return{id:null,asset_id:(s=E.asset)==null?void 0:s.id,repair_date:new Date().toISOString().slice(0,10),issue:"",repair_cost:null,status:"",vendor:"",remarks:""}},d=$(g()),r=$({}),k=$(!1),_=$(!1),U=$(null),u=s=>s?new Date(s).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",t=async()=>{var s;if((s=E.asset)!=null&&s.id)try{const a=await fetch(`/assets/${E.asset.id}/repairs`);if(!a.ok)throw new Error("Failed to fetch repairs");w.value=await a.json()}catch(a){console.error("Error loading repairs:",a)}},n=()=>{d.value=g(),r.value={},k.value=!0},z=s=>{const a=parseFloat(s.repair_cost);d.value={...s,repair_cost:isNaN(a)?null:a,repair_date:s.repair_date.slice(0,10)},r.value={},k.value=!0},T=()=>{k.value=!1,r.value={}},F=async()=>{r.value={};const s=d.value.id?`/repairs/${d.value.id}`:"/repairs",a=d.value.id?"PUT":"POST",N={...d.value,asset_id:E.asset.id};try{const m=await fetch(s,{method:a,headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(N)});if(m.status===422){const H=await m.json();r.value=H.errors;return}if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);await t(),T()}catch(m){console.error("Error submitting form:",m)}},I=s=>{U.value=s,_.value=!0},x=()=>{U.value=null,_.value=!1},l=async()=>{if(U.value)try{const s=await fetch(`/repairs/${U.value}`,{method:"DELETE",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);await t(),x()}catch(s){console.error("Error deleting repair:",s)}};return J(()=>{var s;return(s=E.asset)==null?void 0:s.id},s=>{s?t():w.value=[]},{immediate:!0}),(s,a)=>{var N;return i(),b("div",ge,[a[20]||(a[20]=e("h2",{class:"text-3xl font-extrabold text-gray-900 mb-8 text-center"},"Repair History",-1)),(N=s.$page.props.flash)!=null&&N.success?(i(),b("div",we,f(s.$page.props.flash.success),1)):y("",!0),e("div",{class:"flex justify-end mb-6"},[e("button",{onClick:n,class:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75"}," Add New Repair ")]),e("div",ke,[e("table",he,[a[9]||(a[9]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Issue"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cost"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Vendor"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Remarks"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",$e,[(i(!0),b(C,null,D(w.value,m=>(i(),b("tr",{key:m.id,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",Ce,f(u(m.repair_date)),1),e("td",_e,f(m.issue||"-"),1),e("td",Ve,f(m.repair_cost!=null?`$${m.repair_cost}`:"-"),1),e("td",Ue,f(m.status||"-"),1),e("td",Se,f(m.vendor||"-"),1),e("td",Ae,f(m.remarks||"-"),1),e("td",De,[e("button",{onClick:H=>z(m),class:"text-blue-600 hover:text-blue-800 transition duration-150 ease-in-out focus:outline-none"},a[6]||(a[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 inline-block align-middle",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.38-2.828-2.829z"})],-1),e("span",{class:"sr-only"},"Edit",-1)]),8,Ee),e("button",{onClick:H=>I(m.id),class:"text-red-600 hover:text-red-800 transition duration-150 ease-in-out focus:outline-none"},a[7]||(a[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 inline-block align-middle",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),e("span",{class:"sr-only"},"Delete",-1)]),8,Ne)])]))),128)),w.value.length===0?(i(),b("tr",Te,a[8]||(a[8]=[e("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"},"No repair history found for this asset.",-1)]))):y("",!0)])])]),k.value?(i(),b("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:L(T,["self"])},[e("div",je,[e("h3",Me,f(d.value.id?"Edit":"Add New")+" Repair",1),e("form",{onSubmit:L(F,["prevent"]),novalidate:""},[e("div",Re,[e("div",null,[a[10]||(a[10]=e("label",{for:"repair_date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),c(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>d.value.repair_date=m),type:"date",id:"repair_date",class:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[v,d.value.repair_date]]),r.value.repair_date?(i(),b("p",Pe,f(r.value.repair_date[0]),1)):y("",!0)]),e("div",null,[a[12]||(a[12]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),c(e("select",{"onUpdate:modelValue":a[1]||(a[1]=m=>d.value.status=m),id:"status",class:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},a[11]||(a[11]=[G('<option value="">Select Status</option><option value="Pending">Pending</option><option value="In Progress">In Progress</option><option value="Completed">Completed</option><option value="Cancelled">Cancelled</option>',5)]),512),[[M,d.value.status]]),r.value.status?(i(),b("p",Le,f(r.value.status[0]),1)):y("",!0)]),e("div",ze,[a[13]||(a[13]=e("label",{for:"issue",class:"block text-sm font-medium text-gray-700"},"Issue",-1)),c(e("textarea",{"onUpdate:modelValue":a[2]||(a[2]=m=>d.value.issue=m),id:"issue",rows:"3",class:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[v,d.value.issue]]),r.value.issue?(i(),b("p",Fe,f(r.value.issue[0]),1)):y("",!0)]),e("div",null,[a[14]||(a[14]=e("label",{for:"repair_cost",class:"block text-sm font-medium text-gray-700"},"Cost ($)",-1)),c(e("input",{"onUpdate:modelValue":a[3]||(a[3]=m=>d.value.repair_cost=m),type:"number",step:"0.01",id:"repair_cost",class:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[v,d.value.repair_cost,void 0,{number:!0}]]),r.value.repair_cost?(i(),b("p",Ie,f(r.value.repair_cost[0]),1)):y("",!0)]),e("div",null,[a[15]||(a[15]=e("label",{for:"vendor",class:"block text-sm font-medium text-gray-700"},"Vendor",-1)),c(e("input",{"onUpdate:modelValue":a[4]||(a[4]=m=>d.value.vendor=m),type:"text",id:"vendor",class:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[v,d.value.vendor]]),r.value.vendor?(i(),b("p",He,f(r.value.vendor[0]),1)):y("",!0)]),e("div",Be,[a[16]||(a[16]=e("label",{for:"remarks",class:"block text-sm font-medium text-gray-700"},"Remarks",-1)),c(e("textarea",{"onUpdate:modelValue":a[5]||(a[5]=m=>d.value.remarks=m),id:"remarks",rows:"2",class:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[v,d.value.remarks]]),r.value.remarks?(i(),b("p",Oe,f(r.value.remarks[0]),1)):y("",!0)])]),e("div",{class:"mt-8 flex justify-end space-x-4"},[e("button",{type:"button",onClick:T,class:"px-4 py-2 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300 transition duration-150"}," Cancel "),a[17]||(a[17]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition duration-150"}," Save Repair ",-1))])],32)])])):y("",!0),_.value?(i(),b("div",qe,[e("div",{class:"bg-white rounded-lg shadow-2xl p-6 w-full max-w-sm"},[a[18]||(a[18]=e("h3",{class:"text-lg font-bold text-gray-900"},"Confirm Deletion",-1)),a[19]||(a[19]=e("p",{class:"mt-2 text-sm text-gray-600"},"Are you sure you want to delete this repair record? This action cannot be undone.",-1)),e("div",{class:"mt-6 flex justify-end space-x-3"},[e("button",{onClick:x,class:"px-4 py-2 bg-gray-200 text-gray-800 font-semibold rounded-md hover:bg-gray-300 transition duration-150"}," Cancel "),e("button",{onClick:l,class:"px-4 py-2 bg-red-600 text-white font-semibold rounded-md shadow-sm hover:bg-red-700 transition duration-150"}," Delete ")])])])):y("",!0)])}}},Je={class:"max-w-7xl mx-auto p-6 bg-white rounded shadow mt-4"},We={class:"mb-6 border-b border-gray-200"},Ke={class:"flex space-x-6"},Qe={key:0,class:"fixed-center bg-green-600 text-white px-6 py-3 rounded shadow-lg z-50"},Xe=["value"],Ye=["value"],Ze={class:"md:col-span-3"},et={class:"md:col-span-3"},tt={class:"md:col-span-3 flex justify-between items-center"},st=["disabled"],dt={__name:"Edit",props:{asset:Object,users:Array,locations:Array,categories:Array,transfers:Array,next_id:Number,previous_id:Number},setup(p){var U;const{flash:E}=O().props,w=$(!1),g=$("edit"),d=p,r=q({asset_code:d.asset.asset_code,name:d.asset.name,category:((U=d.asset.category)==null?void 0:U.id)??"",model:d.asset.model,serial_number:d.asset.serial_number,vendor:d.asset.vendor,purchase_date:d.asset.purchase_date,purchase_cost:d.asset.purchase_cost,warranty_expiry:d.asset.warranty_expiry,account_id:d.asset.account_id,status:d.asset.status,current_location_id:d.asset.current_location_id,assigned_to_user_id:d.asset.assigned_to_user_id,notes:d.asset.notes,remark:d.asset.remark}),k=W(()=>r.isDirty),_=()=>{var u;if(!((u=d.asset)!=null&&u.id)){console.error("Asset ID is missing. Cannot submit the form.");return}r.put(route("assets.update",d.asset.id),{preserveScroll:!0,onSuccess:()=>{w.value=!0,setTimeout(()=>{w.value=!1},3e3)},onError:t=>{console.error("Form submission failed:",t),alert("There was an error updating the asset. Please check the fields and try again.")}})};return(u,t)=>(i(),b(C,null,[V(o(K),{title:"Edit Asset"}),V(X,null,{header:h(()=>t[19]||(t[19]=[e("h2",{class:"text-xl font-semibold text-gray-800"},"Edit Asset",-1)])),default:h(()=>[e("div",Je,[e("nav",We,[e("ul",Ke,[e("li",null,[e("button",{onClick:t[0]||(t[0]=n=>g.value="edit"),class:P([g.value==="edit"?"border-b-2 border-blue-600 text-blue-600 font-semibold":"text-gray-600 hover:text-blue-600","pb-2"])}," Edit Asset ",2)]),e("li",null,[e("button",{onClick:t[1]||(t[1]=n=>g.value="transfer"),class:P([g.value==="transfer"?"border-b-2 border-blue-600 text-blue-600 font-semibold":"text-gray-600 hover:text-blue-600","pb-2"])}," Transfer History ",2)]),e("li",null,[e("button",{onClick:t[2]||(t[2]=n=>g.value="repair"),class:P([g.value==="repair"?"border-b-2 border-blue-600 text-blue-600 font-semibold":"text-gray-600 hover:text-blue-600","pb-2"])}," Repair History ",2)])])]),e("div",null,[V(Q,{name:"fade"},{default:h(()=>[w.value?(i(),b("div",Qe," Asset updated successfully! ")):y("",!0)]),_:1}),c(e("div",null,[e("form",{onSubmit:L(_,["prevent"]),class:"grid grid-cols-1 md:grid-cols-3 gap-6"},[e("div",null,[t[20]||(t[20]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Asset Code",-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>o(r).asset_code=n),placeholder:"Asset Code",class:"border p-2 rounded w-full"},null,512),[[v,o(r).asset_code]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Name",-1)),c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>o(r).name=n),placeholder:"Name",class:"border p-2 rounded w-full"},null,512),[[v,o(r).name]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Category",-1)),c(e("select",{"onUpdate:modelValue":t[5]||(t[5]=n=>o(r).category=n),class:"border p-2 rounded w-full"},[t[22]||(t[22]=e("option",{disabled:"",value:""},"-- Select Category --",-1)),(i(!0),b(C,null,D(p.categories,n=>(i(),b("option",{key:n.id,value:n.id},f(n.category_name),9,Xe))),128))],512),[[M,o(r).category]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Model",-1)),c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>o(r).model=n),placeholder:"Model",class:"border p-2 rounded w-full"},null,512),[[v,o(r).model]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Serial Number",-1)),c(e("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>o(r).serial_number=n),placeholder:"Serial Number",class:"border p-2 rounded w-full"},null,512),[[v,o(r).serial_number]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Vendor",-1)),c(e("input",{"onUpdate:modelValue":t[8]||(t[8]=n=>o(r).vendor=n),placeholder:"Vendor",class:"border p-2 rounded w-full"},null,512),[[v,o(r).vendor]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Purchase Date",-1)),c(e("input",{"onUpdate:modelValue":t[9]||(t[9]=n=>o(r).purchase_date=n),type:"date",class:"border p-2 rounded w-full"},null,512),[[v,o(r).purchase_date]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Purchase Cost",-1)),c(e("input",{"onUpdate:modelValue":t[10]||(t[10]=n=>o(r).purchase_cost=n),type:"number",placeholder:"Cost",class:"border p-2 rounded w-full"},null,512),[[v,o(r).purchase_cost]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Warranty Expiry",-1)),c(e("input",{"onUpdate:modelValue":t[11]||(t[11]=n=>o(r).warranty_expiry=n),type:"date",class:"border p-2 rounded w-full"},null,512),[[v,o(r).warranty_expiry]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"User Status",-1)),c(e("select",{"onUpdate:modelValue":t[12]||(t[12]=n=>o(r).status=n),class:"border p-2 rounded w-full"},t[30]||(t[30]=[e("option",{disabled:"",value:""},"-- Select User Status --",-1),e("option",{value:"instock"},"In Stock",-1),e("option",{value:"using"},"Using",-1),e("option",{value:"repair"},"Repair",-1),e("option",{value:"broken"},"Broken",-1)]),512),[[M,o(r).status]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Current Location",-1)),c(e("select",{"onUpdate:modelValue":t[13]||(t[13]=n=>o(r).current_location_id=n),class:"border p-2 rounded w-full"},[t[32]||(t[32]=e("option",{disabled:"",value:""},"-- Select Location --",-1)),(i(!0),b(C,null,D(p.locations,n=>(i(),b("option",{key:n.id,value:n.id},f(n.name),9,Ye))),128))],512),[[M,o(r).current_location_id]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Assigned User",-1)),V(o(j),{modelValue:o(r).assigned_to_user_id,"onUpdate:modelValue":t[14]||(t[14]=n=>o(r).assigned_to_user_id=n),placeholder:"-- Select Assigned User --",class:"w-full",filterable:""},{default:h(()=>[(i(!0),b(C,null,D(p.users,n=>(i(),S(o(A),{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",Ze,[t[35]||(t[35]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"Notes",-1)),c(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=n=>o(r).notes=n),placeholder:"Notes",class:"border p-2 rounded w-full"},null,512),[[v,o(r).notes]])]),e("div",et,[t[36]||(t[36]=e("label",{class:"block mb-1 text-sm font-medium text-gray-700"},"remark",-1)),c(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=n=>o(r).remark=n),placeholder:"Remark",class:"border p-2 rounded w-full"},null,512),[[v,o(r).remark]])]),e("div",tt,[e("div",null,[p.previous_id?(i(),b("button",{key:0,onClick:t[17]||(t[17]=n=>u.$inertia.visit(`/assets/${p.previous_id}/edit`)),type:"button",class:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded mr-2"}," ← Previous ")):y("",!0),p.next_id?(i(),b("button",{key:1,onClick:t[18]||(t[18]=n=>u.$inertia.visit(`/assets/${p.next_id}/edit`)),type:"button",class:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded"}," Next → ")):y("",!0)]),e("button",{type:"submit",class:P(["bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",{"opacity-50 cursor-not-allowed":!k.value}]),disabled:!k.value}," Update ",10,st)])],32)],512),[[B,g.value==="edit"]]),c(e("div",null,[V(ye,{transfers:p.transfers,users:p.users,locations:p.locations,asset:p.asset},null,8,["transfers","users","locations","asset"])],512),[[B,g.value==="transfer"]]),c(e("div",null,[V(Ge,{asset:p.asset},null,8,["asset"])],512),[[B,g.value==="repair"]])])])]),_:1})],64))}};export{dt as default};
